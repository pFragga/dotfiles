#!/bin/sh
#
# Uses dmenu and xwallpaper.

# ensure dependencies are installed
[ $(which xwallpaper 2>/dev/null) ] || exit 1
[ $(which dmenu 2>/dev/null) ] || exit 1

# if no directory was provided, look in the one I use on my system
walldir="$HOME/Pictures/Wallpapers"
[ "$1" == "" ] || walldir="$1"
[ ! -d "$walldir" ] && exit 2
cd "$walldir"

# list out all images and select one
image=$(find *.jpg *.png *.jpeg | dmenu -l 30 -p "Select an image:")
[ "$image" == "" ] && exit

# set the selected image as the wallpaper
xwallpaper --zoom "$image"

# my xinitrc uses this
ln -sf "$PWD/$wallpaper" "$XDG_DATA_HOME/wallpaper"
